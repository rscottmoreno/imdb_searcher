<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>IMDb Search Launcher</title>
    <style>
      :root {
        --bg: #0a1124;
        --bg-soft: #111b35;
        --panel: #142247;
        --panel-soft: #1a2d5d;
        --text: #eaf1ff;
        --muted: #a5b8df;
        --primary: #7a9fff;
        --primary-2: #6a8ff7;
        --accent: #ffd978;
        --border: #2a3f74;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: "Inter", "Segoe UI", Arial, sans-serif;
        color: var(--text);
        background:
          radial-gradient(circle at 20% 0%, rgba(122, 159, 255, 0.2), transparent 35%),
          radial-gradient(circle at 95% 10%, rgba(255, 217, 120, 0.12), transparent 28%),
          linear-gradient(180deg, var(--bg-soft), var(--bg));
      }

      .page {
        width: min(760px, 94%);
        margin: 0 auto;
        padding: 1rem 0 2rem;
      }

      .hero {
        border: 1px solid var(--border);
        border-radius: 18px;
        background: linear-gradient(140deg, #1a2f66, #1e3c7b 54%, #264b97);
        padding: 1rem;
      }

      .hero h1 {
        margin: 0;
        font-size: clamp(1.4rem, 6vw, 2.1rem);
        letter-spacing: -0.02em;
      }

      .hero h1 span {
        color: var(--accent);
      }

      .hero p {
        margin: 0.5rem 0 0;
        color: #d7e2ff;
        line-height: 1.5;
        font-size: 0.95rem;
      }

      .panel {
        margin-top: 0.9rem;
        border: 1px solid var(--border);
        border-radius: 18px;
        background: var(--panel);
        padding: 1rem;
      }

      .field {
        margin-bottom: 0.95rem;
      }

      .field label {
        display: block;
        color: var(--muted);
        font-size: 0.9rem;
        font-weight: 700;
        margin-bottom: 0.45rem;
      }

      input[type="text"],
      input[type="number"] {
        width: 100%;
        border: 1px solid var(--border);
        border-radius: 12px;
        background: var(--panel-soft);
        color: var(--text);
        font-size: 1rem;
        padding: 0.78rem 0.85rem;
      }

      .chips {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
      }

      .chip {
        border: 1px solid var(--border);
        border-radius: 999px;
        background: #1d2f5f;
        color: var(--muted);
        padding: 0.5rem 0.8rem;
        font-size: 0.9rem;
        font-weight: 600;
        cursor: pointer;
      }

      .chip.active {
        border-color: #8eafff;
        background: #2b4688;
        color: #e6eeff;
      }

      .toggle-row {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--muted);
        font-size: 0.92rem;
        margin-bottom: 0.4rem;
      }

      .actions {
        display: grid;
        gap: 0.65rem;
      }

      button {
        width: 100%;
        border-radius: 14px;
        padding: 0.88rem 1rem;
        font-size: 1rem;
        font-weight: 800;
        border: 1px solid transparent;
        cursor: pointer;
        touch-action: manipulation;
      }

      .btn-primary {
        background: linear-gradient(180deg, var(--primary), var(--primary-2));
        color: #fff;
      }

      .btn-secondary {
        background: #223766;
        color: #d7e3ff;
        border-color: #35508e;
      }

      .url-preview {
        margin-top: 0.8rem;
        padding: 0.75rem;
        border: 1px dashed #375593;
        border-radius: 12px;
        color: var(--muted);
        word-break: break-all;
        font-size: 0.82rem;
      }

      .hint {
        color: var(--muted);
        font-size: 0.82rem;
        margin-top: 0.3rem;
      }
    </style>
  </head>
  <body>
    <main class="page">
      <section class="hero">
        <h1><span>IMDb</span> Search Launcher</h1>
        <p>Pick filters, then jump straight into IMDb Advanced Search with one tap.</p>
      </section>

      <section class="panel">
        <div class="field">
          <label for="titleSearch">Search</label>
          <input id="titleSearch" type="text" placeholder="e.g. scary movie in the woods" />
          <p class="hint">Optional title keyword</p>
        </div>

        <div class="field">
          <label>Genre Picker</label>
          <div class="chips" id="genreChips"></div>
        </div>

        <div class="field">
          <label for="oldestYear">Oldest Year</label>
          <input id="oldestYear" type="number" min="1900" max="2100" value="2000" />
        </div>

        <div class="field">
          <label for="minRating">Minimum Rating</label>
          <input id="minRating" type="number" min="0" max="10" step="0.1" placeholder="e.g. 7.5" />
          <p class="hint">Optional</p>
        </div>

        <div class="field">
          <div class="toggle-row">
            <input id="useMinVotes" type="checkbox" checked />
            <label for="useMinVotes">Use minimum votes</label>
          </div>
          <input id="minVotes" type="number" min="0" step="1000" value="50000" />
          <p class="hint">Optional</p>
        </div>

        <div class="actions">
          <button id="openImdbButton" class="btn-primary" type="button">Search on IMDb</button>
          <button id="resetButton" class="btn-secondary" type="button">Reset Filters</button>
        </div>

        <div id="urlPreview" class="url-preview"></div>
      </section>
    </main>

    <script>
      const genres = [
        "Action",
        "Adventure",
        "Animation",
        "Biography",
        "Comedy",
        "Crime",
        "Documentary",
        "Drama",
        "Family",
        "Fantasy",
        "Horror",
        "Mystery",
        "Romance",
        "Sci-Fi",
        "Thriller"
      ];

      const chipsEl = document.getElementById("genreChips");
      const oldestYearEl = document.getElementById("oldestYear");
      const minRatingEl = document.getElementById("minRating");
      const titleSearchEl = document.getElementById("titleSearch");
      const useMinVotesEl = document.getElementById("useMinVotes");
      const minVotesEl = document.getElementById("minVotes");
      const openImdbButtonEl = document.getElementById("openImdbButton");
      const resetButtonEl = document.getElementById("resetButton");
      const urlPreviewEl = document.getElementById("urlPreview");

      const selectedGenres = new Set();

      function toImdbGenreName(genreName) {
        const map = { "Sci-Fi": "sci_fi" };
        return map[genreName] || genreName.toLowerCase().replace(/\s+/g, "_");
      }

      function buildImdbUrl() {
        const params = new URLSearchParams({
          title_type: "feature",
          languages: "en",
          sort: "user_rating,desc"
        });

        const oldestYear = oldestYearEl.value.trim();
        const minRating = minRatingEl.value.trim();
        const titleQuery = titleSearchEl.value.trim();
        const minVotes = minVotesEl.value.trim();

        if (oldestYear) {
          params.set("release_date", `${oldestYear}-01-01,`);
        }
        if (minRating) {
          params.set("user_rating", `${minRating},`);
        }
        if (titleQuery) {
          params.set("title", titleQuery);
        }
        if (useMinVotesEl.checked && minVotes) {
          params.set("num_votes", `${minVotes},`);
        }
        if (selectedGenres.size) {
          params.set("genres", [...selectedGenres].map(toImdbGenreName).join(","));
        }

        return `https://www.imdb.com/search/title/?${params.toString()}`;
      }

      function updatePreview() {
        urlPreviewEl.textContent = buildImdbUrl();
      }

      function renderGenreChips() {
        chipsEl.innerHTML = "";
        genres.forEach((genre) => {
          const chip = document.createElement("button");
          chip.type = "button";
          chip.className = "chip";
          chip.textContent = genre;
          chip.addEventListener("click", () => {
            if (selectedGenres.has(genre)) {
              selectedGenres.delete(genre);
              chip.classList.remove("active");
            } else {
              selectedGenres.add(genre);
              chip.classList.add("active");
            }
            updatePreview();
          });
          chipsEl.appendChild(chip);
        });
      }

      function resetFilters() {
        selectedGenres.clear();
        oldestYearEl.value = "2000";
        minRatingEl.value = "";
        titleSearchEl.value = "";
        useMinVotesEl.checked = true;
        minVotesEl.value = "50000";
        renderGenreChips();
        updatePreview();
      }

      openImdbButtonEl.addEventListener("click", () => {
        window.open(buildImdbUrl(), "_blank", "noopener,noreferrer");
      });

      titleSearchEl.addEventListener("keydown", (event) => {
        if (event.key === "Enter") {
          event.preventDefault();
          window.open(buildImdbUrl(), "_blank", "noopener,noreferrer");
        }
      });

      resetButtonEl.addEventListener("click", resetFilters);
      oldestYearEl.addEventListener("input", updatePreview);
      minRatingEl.addEventListener("input", updatePreview);
      titleSearchEl.addEventListener("input", updatePreview);
      minVotesEl.addEventListener("input", updatePreview);
      useMinVotesEl.addEventListener("change", updatePreview);

      renderGenreChips();
      updatePreview();
    </script>
  </body>
</html>
